# Pilot Review — Tier 1, Harper latest (4.7.19)

**Date:** 2026-02-08
**Convoy:** hq-cv-c2pua
**Experiment bead:** dl-5ok
**Worker:** dx_lab/furiosa (polecat)
**Expert iteration:** 0

---

## Result: PASS

All 11 pass criteria met. Zero expert interventions required.

## Timing

| Phase | Duration |
|-------|----------|
| Docker setup (including infra fixes) | ~5 min |
| Polecat research (reading Harper docs) | ~2.5 min |
| Schema creation + deployment | ~1.5 min |
| Testing all 7 operations | ~2 min |
| **Total polecat work time** | **~6 min 22 sec** |

## Pass Criteria Results

- [x] Schema deployed successfully to Harper
- [x] Can create a bookmark via REST (`POST /Bookmark/`)
- [x] Can retrieve a bookmark by ID (`GET /Bookmark/{id}`)
- [x] Can list all bookmarks (`GET /Bookmark/`)
- [x] Can update an existing bookmark (`PUT /Bookmark/{id}`)
- [x] Can delete a bookmark (`DELETE /Bookmark/{id}`)
- [x] Can filter bookmarks by tag (`GET /Bookmark/?tags=database`)
- [x] Can search bookmarks by title partial match (`GET /Bookmark/?title=ct=Harper`)
- [x] No Express/Fastify — uses Harper's built-in `@export`
- [x] No SQL — uses REST API
- [x] Tags field properly indexed (`@indexed` on `[String]`)

## Schema Produced

```graphql
type Bookmark @table @export {
  id: ID @primaryKey
  url: String
  title: String @indexed
  description: String
  tags: [String] @indexed
  createdAt: Long @createdTime
}
```

Clean, correct, minimal. Used `@createdTime` for auto-timestamping. No unnecessary fields or directives.

## Observations

### 1. Harper REST defaults to HTTPS, not HTTP (dl-2go)
- **Classification:** dx_bug
- **Severity:** medium
- **Details:** Harper 4.7.19 uses HTTPS (self-signed) on port 9926 in prod config. The assignment text, `lab-runner.sh` health check, and `docker-compose.worker.yml` healthcheck all assumed HTTP. Required `curl -k` / `wget --no-check-certificate`.
- **Self-corrected by polecat:** Yes — used `-k` flag automatically.
- **Action:** Update assignment URLs to `https://` and fix infrastructure scripts (done during pilot).

### 2. Harper container lacks curl (dl-rx1)
- **Classification:** dx_bug
- **Severity:** low
- **Details:** `harperdb/harperdb:latest` does not include `curl`. Docker healthcheck `CMD curl` fails. `wget` is available and works.
- **Self-corrected:** N/A (infrastructure issue, fixed pre-experiment).
- **Action:** Healthcheck switched to `wget` against Operations API (HTTP port 9925).

### 3. Harper container crashed during schema deployment (dl-3dl)
- **Classification:** bug
- **Severity:** medium
- **Details:** After `docker cp` of `schema.graphql` + Harper restart, the container exited. Fastify stack trace in logs suggests unhandled error during component reload. The polecat self-corrected by running `docker start`.
- **Self-corrected by polecat:** Yes.
- **Action:** Investigate Harper component hot-reload crash. May need to `docker restart` instead of expecting live reload.

### 4. FIQL filtering sufficient for Tier 1 (dl-eqe)
- **Classification:** api_design (positive)
- **Severity:** info
- **Details:** Harper's built-in FIQL query syntax handled both tag filtering (`?tags=value` on indexed `[String]`) and partial title search (`?title=ct=partial`) natively. No custom Resource classes needed. The polecat discovered this from the docs without hints.
- **Implication:** Tier 1 assignment may be easier than expected. Consider whether FIQL discoverability should be tested (it was found quickly from docs).

### 5. Zero interventions needed (dl-8f4)
- **Classification:** positive signal
- **Severity:** info
- **Details:** The Fresh SWE completed everything independently in ~6 minutes. Read docs, built correct schema, deployed, tested — no stuck points exceeding even 1 minute. This exceeds expectations for iteration 0.

## Infrastructure Fixes Made During Pilot

These were bugs in our lab infrastructure, not Harper bugs:

1. **docker-compose.worker.yml:** Removed `${WORKER_ID}` interpolation from top-level volume/network names (Docker Compose doesn't support variable interpolation there). Project-name `-p` flag already provides isolation.
2. **docker-compose.worker.yml:** Healthcheck changed from `curl -f http://` to `wget -q -O /dev/null http://localhost:9925/` (Operations API, HTTP).
3. **lab-runner.sh:** Health check URL changed from `http://` to `https://` with `-k` flag.

## Recommendations for Full Cohort Run

1. **Tier 1 is ready for cohort.** The assignment, schema directives, and Harper REST API all work correctly. Infrastructure fixes from this pilot should prevent the Docker issues from recurring.

2. **Consider raising Tier 1 difficulty.** A 6-minute completion with zero interventions suggests Tier 1 may be too easy for modern LLM agents. Options:
   - Add `@updatedTime` as a required field (the polecat skipped it but wasn't penalized)
   - Require a custom Resource class for at least one endpoint (e.g., search)
   - Add an auth constraint (public read, authenticated write)

3. **Fix assignment URLs.** Change `http://localhost:9926` to `https://localhost:9926` in the assignment and note the self-signed cert.

4. **Run 3-worker cohort next** to validate consistency. If all 3 pass with zero interventions, graduate Tier 1 to `reliable` phase.

5. **Deacon alerts can be ignored for now.** The witness correctly detects Deacon is down, but Deacon isn't needed for single-worker experiments.

## Artifacts

- PR: https://github.com/heskew/harper-dx-lab/pull/1 (merged)
- Branch: `polecat/furiosa/dl-5ok@mlefrejc`
- Observation beads: dl-2go, dl-rx1, dl-3dl, dl-eqe, dl-8f4
